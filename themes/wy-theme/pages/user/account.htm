title = "账号"
url = "/account/:code?"
layout="default"

[account]
redirect = "account"
paramCode = "code"
[b7Account]
==
function onStart(){
//var_dump($this->user);
}
==
<div class="container margin-top-20">
    {% if not user %}
    <div class="row">
        <div class="col-md-6">
            <!--登陆-->
            <div class="panel panel-default">
                <div class="panel-heading">
                    登陆
                </div>
                <div class="panel-body">
                    <form data-request="onSignin">
                        <div class="form-group">
                            <label for="userSigninLogin">邮箱</label>
                            <input
                                    name="login"
                                    type="text"
                                    class="form-control"
                                    id="userSigninLogin"
                                    placeholder="请输入你的电子邮箱">
                        </div>
                        <div class="form-group">
                            <label for="userSigninPassword">密码</label>
                            <input
                                    name="password"
                                    type="password"
                                    class="form-control"
                                    id="userSigninPassword"
                                    placeholder="输入密码">
                        </div>
                        <button type="submit" class="btn btn-default">登陆</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    注册
                </div>
                <div class="panel-body">
                    {% if canRegister%}
                    <form data-request="onRegister">
                        <div class="form-group">
                            <label for="registerName">名称</label>
                            <input
                                    name="name"
                                    type="text"
                                    class="form-control"
                                    id="registerName"
                                    placeholder="输入你的全名">
                        </div>
                        <div class="form-group">
                            <label for="registerEmail">邮箱</label>
                            <input
                                    name="email"
                                    type="email"
                                    class="form-control"
                                    id="registerEmail"
                                    placeholder="Enter your email"/>
                        </div>

                        <div class="form-group">
                            <label for="registerPassword">密码</label>
                            <input
                                    name="password"
                                    type="password"
                                    class="form-control"
                                    id="registerPassword"
                                    placeholder="Choose a password"/>
                        </div>

                        <button type="submit" class="btn btn-default">注册</button>

                    </form>
                    {% else %}
                    不能注册
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <div class="row">
        {% if not user.is_activated %}
        <div class="col-md-6">
            <h3>你的邮箱还没有被验证</h3>
            <p>
                请检查你的邮箱验证你的账号.
                <a href="javascript:;" data-request="onSendActivationEmail">重新发送验证信息</a>.
            </p>
        </div>
        {% endif %}
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    修改个人信息
                </div>
                <div class="panel-body">
                    {{ form_ajax('onUpdate', { model: user }) }}

                    <div class="form-group">
                        <label for="accountName">名称</label>
                        <input name="name" type="text" class="form-control" id="accountName" value="{{ form_value('name') }}">
                    </div>

                    <div class="form-group">
                        <label for="accountEmail">邮箱</label>
                        <input name="email" type="email" class="form-control" id="accountEmail" value="{{ form_value('email') }}" disabled>
                    </div>

                    <div class="form-group">
                        <label for="accountB7mobile">手机号码</label>
                        <input name="b7_mobile" type="text" class="form-control" id="accountB7mobile" value="{{ form_value('b7_mobile') }}">
                    </div>

                    <div class="form-group">
                        <label for="accountB7address">地址</label>
                        <input name="b7_address" type="text" class="form-control" id="accountB7address" value="{{ form_value('b7_address') }}">
                    </div>

                    <div class="form-group">
                        <label for="accountPassword">新密码</label>
                        <input name="password" type="password" class="form-control" id="accountPassword">
                    </div>

                    <div class="form-group">
                        <label for="accountPasswordConfirm">确认密码</label>
                        <input name="password_confirmation" type="password" class="form-control" id="accountPasswordConfirm">
                    </div>

                    <button type="submit" class="btn btn-default">保存</button>

                    {{ form_close() }}
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    用户头像
                </div>
                <div class="panel-body">
                    {% component 'imageUploader' %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
